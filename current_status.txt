npm webassembly (npm i -g webassembly@0.11.0) works perfectly with C code.

Emscripten works perfectly with C and C++ code but can't find C++ name-mangled functions (i.e. I have to wrap them with extern "C" { <cpp_function> }).
Option 1:
    Write one main function per wasm file, this is, for each function we want to use. Then print it through std::cout and capture it in javascript (less than ideal...).
Option 2:
    Write code in C.

C code should only be compiled using npm webassembly module (wa compile).

It is not a good idea to mix C and C++ modules in emcc as it complains with a warning.